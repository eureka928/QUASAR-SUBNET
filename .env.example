# =============================================================================
# QUASAR-SUBNET Environment Configuration
# Copy this file to .env and fill in your values:  cp .env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# Required â€” Miner
# -----------------------------------------------------------------------------
GITHUB_TOKEN="your_github_token"
GITHUB_USERNAME="your_github_username"

# -----------------------------------------------------------------------------
# Network & Wallet
# -----------------------------------------------------------------------------
NETUID=383                          # 383 = testnet, check registry for mainnet
SUBTENSOR_NETWORK="test"           # "finney" for mainnet, "test" for testnet

# Miner wallet
WALLET_MINER_NAME="quasar_miner"
WALLET_HOTKEY="default"

# Validator wallet
WALLET_VALIDATOR_NAME="quasar_validator"
# WALLET_HOTKEY="default"          # shared with miner setting above

# -----------------------------------------------------------------------------
# Miner Settings
# -----------------------------------------------------------------------------
TARGET_SEQUENCE_LENGTH=100000      # target sequence length for benchmarking
AGENT_ITERATIONS=100               # kernel optimization iterations
OPTIMIZATION_INTERVAL=300          # seconds between optimization cycles

# Model for code generation
MINER_MODEL_NAME="Qwen/Qwen3-4B-Instruct-2507"

# Context Builder Configuration
USE_FULL_CONTEXT="true"
CONTEXT_MAX_FILES=50
CONTEXT_MAX_SIZE=200000            # ~50K tokens
# REPO_PATH=./flash-linear-attention       # optional, for BYOC/local testing
# BYOC_FILE_PATH=./expert_optimized_chunk.py  # Bring-Your-Own-Code mode

# -----------------------------------------------------------------------------
# Validator API Server (START_SERVER.sh)
# -----------------------------------------------------------------------------
HOST="0.0.0.0"
PORT=8000
DATABASE_URL="sqlite:///./quasar_validator.db"
VALIDATOR_API_URL="http://localhost:8000"

# -----------------------------------------------------------------------------
# Validator Neuron (START_VALIDATOR.sh)
# -----------------------------------------------------------------------------
POLLING_INTERVAL=300               # seconds between polling cycles

# Logit verification
ENABLE_LOGIT_VERIFICATION="true"
REFERENCE_MODEL="Qwen/Qwen2.5-0.5B-Instruct"
COSINE_SIM_THRESHOLD=0.99
MAX_ABS_DIFF_THRESHOLD=0.1

# Commit-reveal
BLOCKS_UNTIL_REVEAL=100            # ~20 minutes at 12s/block
BLOCK_TIME_SECONDS=12

# -----------------------------------------------------------------------------
# Miner Inference Server (START_MINER_INFERENCE.sh)
# -----------------------------------------------------------------------------
MINER_INFERENCE_PORT=8001          # avoids conflict with validator API on 8000
DEVICE="cuda"                      # "cuda" or "cpu"
# REFERENCE_MODEL is shared with validator setting above
